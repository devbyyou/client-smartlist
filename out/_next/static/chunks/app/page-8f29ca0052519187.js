(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{2337:function(e,t,r){Promise.resolve().then(r.bind(r,9324))},5572:function(e,t,r){"use strict";r.d(t,{default:function(){return o}});var a=r(7437),i=r(4469),n=r.n(i);function o(){return(0,a.jsx)("div",{className:n().contentLoader,children:(0,a.jsx)("div",{className:n().spinner})})}},2153:function(e,t,r){"use strict";r.d(t,{C:function(){return n},T:function(){return i}});var a=r(1444);let i=a.I0,n=a.v9},9324:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var a=r(7437),i=r(2151),n=r.n(i),o=r(8880),s=r.n(o),c={src:"/_next/static/media/4129571.4b93feb4.png"},d={src:"/_next/static/media/9584634.288215fa.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA30lEQVR4nGN8/e+jKQcju3TEr7ajXkx6nf8Z/v9hQIB/jC//fZzFysgiefb3jeln/tzqArJZgIr+ASUZgfgv471/7wy4GdnlxG+Unczkt5n/j+H/7///gVIQBX8Yb/59Y8zNxKEic1ptX7Jk79Y////9BEqAACNQxV/GS39fGfMAFSgt5NvnaLR466///+EKgAb9ZTz796UB0AQ5jU3FJ61k7eYDFfwGSoIAIxD+YTz+78UsNqAj9929Pr303vUuCWYWlm///yMceejvM1MuJnZpkwk1R0W0TDq//Ef1JgCrE2IQCvDEPwAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},l=r(6648),u=r(6920),m=r(85),_=r(2265),g=r(2153),p=r(4108),f=r(3478),h=r(2094),C=r(153),v=r(6463),x=r(1344),j=r(5974),y=r(5572),I=r(6800),A=r.n(I);function S(){var e;let t=(0,g.T)(),[r,i]=(0,_.useState)(null),[o,I]=(0,_.useState)(!1),[S,b]=(0,_.useState)(!1),[N,H]=(0,_.useState)(!1),[E,k]=(0,_.useState)(""),[w,L]=(0,_.useState)(""),[D,T]=(0,_.useState)(null),[P,R]=(0,_.useState)(),[U,O]=(0,_.useState)({image:"",nom:""}),B=(0,g.C)(e=>e.searchApi.dataApi),G=(0,g.C)(e=>e.searchApi.dataApiByCat),Z=(0,g.C)(e=>e.produits.clickedCards),z=(0,g.C)(e=>e.searchApi.loading);(0,g.C)(e=>e.login);let J=(0,g.C)(e=>e.listDecourse.credentials);(0,g.C)(e=>e.produits.credentials.produits);let M=(0,g.C)(e=>e.categorie.categorie),Q=(0,g.C)(e=>e.user.credentials.listesCourses),W=(0,v.useRouter)(),q=(0,_.useMemo)(()=>n()(e=>{t((0,p.Ue)({stateInput:e}))},1e3),[t]);(0,_.useEffect)(()=>{let e=(0,C.$U)();return e&&e.access_token?(T((0,C.TD)(e.access_token)),t((0,h.Is)()),t((0,f.IS)()),t((0,x.WZ)()),t((0,j.H8)())):W.push("/login"),E&&q(E),()=>{q.cancel()}},[t,W,E,q]);let Y=Q.flatMap(e=>e.produits.map(e=>e)),V=M.slice(0,5),F=Y.slice(0,5);if(!D)return(0,a.jsx)("p",{children:"Chargement..."});async function K(e){k(e.target.value),I(!0)}let $=e=>{k(e.product_name),i(e._id||e.code||e.id),I(!1)},X=async e=>{e.preventDefault();let a=B.find(e=>e._id===r||e.code===r);a?(console.log("Produit trouv\xe9 :",a),await t((0,f.D8)({userId:D.sub,produitId:r})),await t((0,h.Is)()),k("")):console.log("Aucun produit trouv\xe9 pour :",E)},ee=async(e,r)=>{await t((0,h.Cd)({id:e,listDeCourseId:r})),await t((0,h.Is)())},et=async(e,r)=>{O(e),R(r),await t((0,p.J8)({categoryId:parseInt(e.id,10)})),L(e.image),b(!0)},er=async(e,r)=>{t((0,f.h1)(e._id));let a=e._id,i=G.find(e=>e._id===a);i?(console.log("Produit trouv\xe9 :",i),await t((0,f.D8)({userId:D.sub,produitId:a})),await t((0,h.Is)())):console.log("Aucun produit trouv\xe9 pour :",E)};return(0,a.jsxs)("div",{className:s().homePage,children:[(0,a.jsx)("header",{className:s().header,children:(0,a.jsx)("button",{onClick:()=>W.back,className:s().backButton,children:(0,a.jsx)(u.G,{icon:m.ac})})}),(0,a.jsxs)("section",{className:s().shoppingList,children:[(0,a.jsx)("h1",{className:s().title,children:"Liste de courses"}),null===(e=J.produits)||void 0===e?void 0:e.map((e,t)=>(0,a.jsx)("div",{onClick:()=>ee(e.id,e.listDeCourseId),className:s().itemCard,children:(0,a.jsxs)("div",{className:s().itemDetails,children:[(0,a.jsx)("img",{src:e.image,alt:"image de ".concat(e.nom),className:s().itemImage}),(0,a.jsx)("div",{className:s().itemNom,children:(0,a.jsx)("h2",{children:e.nom})})]})},t))]}),(0,a.jsxs)("form",{onSubmit:X,method:"POST",action:"submit",className:s().searchSection,children:[(0,a.jsx)("input",{value:E,onChange:K,type:"text",className:"w-full p-2 border rounded-md bg-gray-800 text-white placeholder-gray-400",placeholder:"Search product"}),o&&B&&B.length>0&&(0,a.jsx)("ul",{className:"absolute z-10 w-full bg-gray-800 border border-gray-700 rounded-md shadow-lg mt-1 text-white",children:B.map((e,t)=>(0,a.jsx)("li",{className:"cursor-pointer p-2 hover:bg-gray-600",onClick:()=>$(e),children:(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:e.product_name||e.generic_name}),(0,a.jsx)("span",{className:"block text-xs text-gray-400",children:e.brands})]})},t))})]}),(0,a.jsxs)("main",{className:s().mainHome,children:[(0,a.jsxs)("section",{className:s().recentSection,children:[(0,a.jsx)("h2",{children:"R\xe9cent "}),(0,a.jsx)("div",{className:s().recentItems,children:null==F?void 0:F.map((e,t)=>(0,a.jsx)("div",{className:s().recentItem,children:(0,a.jsx)("img",{src:e.image,alt:"Image de ".concat(e.nom," ")})},t))})]}),(0,a.jsxs)("section",{className:s().suggestionsSection,children:[(0,a.jsx)("h2",{children:"Suggestions"}),(0,a.jsx)("div",{className:s().suggestions,children:null==F?void 0:F.map((e,t)=>(0,a.jsx)("button",{children:e.nom},t))})]}),(0,a.jsxs)("section",{className:s().categoriesSection,children:[(0,a.jsxs)("h2",{children:["Categories",(0,a.jsx)("button",{onClick:e=>{H(!N)},children:"".concat(N?"R\xe9duire":"See All")})]}),(0,a.jsx)("div",{className:s().categoriesItemBox,children:(0,a.jsx)("div",{className:s().categoriesItem,children:N?null==M?void 0:M.map((e,t)=>(0,a.jsx)("div",{onClick:()=>et(e,t),className:A()(s().categories,{[s().isClickedCardCat]:P===t}),children:(0,a.jsx)("img",{src:e.image?e.image:c.src,alt:"Image de ".concat(e.nom)})},t)):null==V?void 0:V.map((e,t)=>(0,a.jsx)("div",{onClick:()=>et(e,t),className:A()(s().categories,{[s().isClickedCardCat]:P===t}),children:(0,a.jsx)("img",{src:e.image?e.image:c.src,alt:"Image de ".concat(e.nom)})},t))})})]}),z?(0,a.jsx)(y.default,{}):S&&(0,a.jsxs)("div",{className:s().container,children:[(0,a.jsxs)("div",{className:s().itemTitleCategorie,children:[(0,a.jsxs)("div",{className:s().itemLeftIcon,children:[(0,a.jsx)("div",{className:"".concat(s().categories," ").concat(s().categoriesClicked),children:(0,a.jsx)("img",{src:w||c.src,alt:"Image de "})}),(0,a.jsx)("h2",{className:s().titleCategorie,children:U.nom})]}),(0,a.jsx)("div",{className:s().itemTitleRightIcon,children:(0,a.jsx)(l.default,{width:30,height:10,src:d,alt:"Image de"})})]}),(0,a.jsx)("div",{className:s().productList,children:Array.isArray(G)?null==G?void 0:G.map((e,t)=>(0,a.jsxs)("div",{onClick:()=>er(e,t),className:A()(s().productCard,{[s().isClicked]:Z[e._id]}),children:[(0,a.jsx)("div",{className:s().imageContainer,children:(0,a.jsx)("img",{src:e.image_url?e.image_url:c.src,alt:"Image de ".concat(e.product_name),width:60,height:60,className:s().productImage})}),(0,a.jsx)("div",{className:s().productInfo,children:(0,a.jsx)("h3",{className:s().productName,children:e.product_name})})]},t)):(0,a.jsx)(y.default,{})})]})]})]})}},1344:function(e,t,r){"use strict";r.d(t,{WZ:function(){return o}});var a=r(6862),i=r(7062),n=r(8626);let o=(0,i.a)("categorie/LIST_DE_CATEGORIE",async(e,t)=>{try{return(await n.b.get("categorie")).data}catch(e){throw Error()}}),s=(0,a.Lq)({categorie:[{image:"",nom:"",id:""}]},e=>{e.addCase(o.fulfilled,(e,t)=>{e.categorie=t.payload})});t.ZP=s},2094:function(e,t,r){"use strict";r.d(t,{Cd:function(){return c},Is:function(){return s}});var a=r(6862),i=r(7062),n=r(8626),o=r(153);let s=(0,i.a)("listDecourse/LIST_DE_COURSE",async(e,t)=>{try{t.getState();let e=(0,o.$U)();if(!e||!e.access_token)throw Error("Utilisateur non authentifi\xe9");let r=(0,o.TD)(e.access_token).sub;return(await n.b.get("listes-de-courses/".concat(r))).data}catch(e){throw Error()}}),c=(0,i.a)("listDecourse/REMOVE_LIST_DE_COURSE",async(e,t)=>{let{listDeCourseId:r,id:a}=e;try{return(await n.b.delete("listes-de-courses/".concat(a,"/").concat(r))).data}catch(e){throw Error()}}),d=(0,a.PH)("listDecourse/CHANGE_CREDENTIALS_FIELD"),l=(0,a.Lq)({isproduits:!1,errorLogin:null,credentials:{id:0,userId:0,produits:[]}},e=>{e.addCase(d,(e,t)=>{let{field:r,value:a}=t.payload;e.credentials[r]=a}).addCase(s.fulfilled,(e,t)=>{e.credentials.produits=t.payload.produits}).addCase(c.fulfilled,(e,t)=>{e.credentials.produits=t.payload.produits}).addCase(s.rejected,(e,t)=>{console.error("error prodiot POST---->",Error,"le msg >>",t.error.message)})});t.ZP=l},3478:function(e,t,r){"use strict";r.d(t,{D8:function(){return o},IS:function(){return s},h1:function(){return d}});var a=r(6862),i=r(7062),n=r(8626);let o=(0,i.a)("produits/PRODUITS",async(e,t)=>{let{userId:r,produitId:a}=e;try{return(await n.b.post("produits/add-to-list",{userId:r,produitId:a})).data}catch(e){throw Error()}}),s=(0,i.a)("getProduits/GET_PRODUITS",async(e,t)=>{try{return(await n.b.get("produits")).data}catch(e){throw Error()}}),c=(0,a.PH)("produits/CHANGE_CREDENTIALS_FIELD"),d=(0,a.PH)("produits/TOGGLE_CARD_CLICKED"),l=(0,a.Lq)({isproduits:!1,errorLogin:null,credentials:{id:0,userId:0,produits:[{image:"",nom:""}]},clickedCards:{}},e=>{e.addCase(c,(e,t)=>{let{field:r,value:a}=t.payload;e.credentials[r]=a}).addCase(d,(e,t)=>{let r=t.payload;e.clickedCards[r]=!e.clickedCards[r]}).addCase(o.fulfilled,(e,t)=>{}).addCase(s.fulfilled,(e,t)=>{e.credentials.produits=t.payload}).addCase(o.rejected,(e,t)=>{console.error("error prodiot POST---->",Error,"le msg >>",t.error.message)})});t.ZP=l},4108:function(e,t,r){"use strict";r.d(t,{J8:function(){return s},Ue:function(){return o}});var a=r(6862),i=r(8626),n=r(7062);let o=(0,n.a)("searchApi/SEARCH",async(e,t)=>{let{stateInput:r}=e;try{return(await i.b.get("search?search_terms=".concat(r,"&json=true"))).data}catch(e){console.log("log error l33 searchAPI.ts",e)}}),s=(0,n.a)("searchApi/SEARCH_BY_CATEGORY",async(e,t)=>{let{categoryId:r}=e;try{return(await i.b.get("search/by-category?categoryId=".concat(r))).data}catch(e){console.log("log error l33 searchAPI.ts",e)}}),c=(0,a.Lq)({dataApi:[{generic_name:""}],loading:!1,error:null,dataApiByCat:[{product_name:"",image_url:"",_id:""}],isClicked:!1},e=>{e.addCase(o.pending,e=>{}).addCase(o.fulfilled,(e,t)=>{e.dataApi=t.payload}).addCase(s.fulfilled,(e,t)=>{e.loading=!1,e.dataApiByCat=t.payload}).addCase(s.pending,e=>{e.loading=!0}).addCase(s.rejected,e=>{e.loading=!0}).addCase(o.rejected,e=>{})});t.ZP=c},5974:function(e,t,r){"use strict";r.d(t,{H8:function(){return s}});var a=r(6862),i=r(7062),n=r(8626),o=r(153);let s=(0,i.a)("user/GET_USER",async(e,t)=>{let r=(0,o.$U)();if(!r||!r.access_token)throw Error("Utilisateur non authentifi\xe9");let a=(0,o.TD)(r.access_token).sub,{data:i}=await n.b.get("/utilisateur/".concat(a));return i}),c=(0,a.PH)("user/CHANGE_CREDENTIALS_FIELD"),d=(0,a.Lq)({logged:!1,credentials:{id:0,email:"",password:"",name:"",listesCourses:[{createdAt:"",id:0,produits:[{image:"",nom:""}],updatedAt:"",userId:0}]}},e=>{e.addCase(c,(e,t)=>{let{field:r,value:a}=t.payload;e.credentials[r]=a}).addCase(s.fulfilled,(e,t)=>{e.credentials.listesCourses=t.payload.listesCourses,e.credentials.email=t.payload.email,e.credentials.name=t.payload.name})});t.ZP=d},8626:function(e,t,r){"use strict";r.d(t,{b:function(){return n}});var a=r(8472),i=r(153);let n=a.Z.create({baseURL:"/api"});n.interceptors.request.use(e=>{let t=(0,i.$U)(),r=t?t.access_token:null;return r&&(e.headers.Authorization="Bearer ".concat(r)),e},e=>Promise.reject(e))},7062:function(e,t,r){"use strict";r.d(t,{a:function(){return a}});let a=r(6862).hg.withTypes()},153:function(e,t,r){"use strict";r.d(t,{$U:function(){return i},DX:function(){return o},TD:function(){return s},kS:function(){return n}});var a=r(9714);let i=()=>{let e=localStorage.getItem("token");if(!e)return null;try{return JSON.parse(e)}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es utilisateur:",e),null}},n=()=>{localStorage.removeItem("token"),localStorage.clear()},o=e=>{try{localStorage.setItem("token",JSON.stringify(e))}catch(e){console.error("Erreur lors de la sauvegarde des donn\xe9es utilisateur:",e)}},s=e=>{try{return(0,a.o)(e)}catch(e){return console.error("Erreur lors du d\xe9codage du token:",e),null}}},2151:function(e,t,r){var a=0/0,i=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt,d="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,l="object"==typeof self&&self&&self.Object===Object&&self,u=d||l||Function("return this")(),m=Object.prototype.toString,_=Math.max,g=Math.min,p=function(){return u.Date.now()};function f(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){if("number"==typeof e)return e;if("symbol"==typeof(t=e)||t&&"object"==typeof t&&"[object Symbol]"==m.call(t))return a;if(f(e)){var t,r="function"==typeof e.valueOf?e.valueOf():e;e=f(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var d=o.test(e);return d||s.test(e)?c(e.slice(2),d?2:8):n.test(e)?a:+e}e.exports=function(e,t,r){var a,i,n,o,s,c,d=0,l=!1,u=!1,m=!0;if("function"!=typeof e)throw TypeError("Expected a function");function C(t){var r=a,n=i;return a=i=void 0,d=t,o=e.apply(n,r)}function v(e){var r=e-c,a=e-d;return void 0===c||r>=t||r<0||u&&a>=n}function x(){var e,r,a,i=p();if(v(i))return j(i);s=setTimeout(x,(e=i-c,r=i-d,a=t-e,u?g(a,n-r):a))}function j(e){return(s=void 0,m&&a)?C(e):(a=i=void 0,o)}function y(){var e,r=p(),n=v(r);if(a=arguments,i=this,c=r,n){if(void 0===s)return d=e=c,s=setTimeout(x,t),l?C(e):o;if(u)return s=setTimeout(x,t),C(c)}return void 0===s&&(s=setTimeout(x,t)),o}return t=h(t)||0,f(r)&&(l=!!r.leading,n=(u="maxWait"in r)?_(h(r.maxWait)||0,t):n,m="trailing"in r?!!r.trailing:m),y.cancel=function(){void 0!==s&&clearTimeout(s),d=0,a=c=i=s=void 0},y.flush=function(){return void 0===s?o:j(p())},y}},8880:function(e){e.exports={homePage:"Home_homePage___GVYH",header:"Home_header__PRUB8",backButton:"Home_backButton__YKnn0",title:"Home_title__A_ZDL",shoppingList:"Home_shoppingList__nyzo1",itemCard:"Home_itemCard__nT0VO",itemDetails:"Home_itemDetails__QHjxS",itemImage:"Home_itemImage__uD_jQ",itemNom:"Home_itemNom__U2qdh",addButton:"Home_addButton__Sp3xE",searchSection:"Home_searchSection__IF1mR",searchInput:"Home_searchInput__24j4E",recentSection:"Home_recentSection__91cQ_",suggestionsSection:"Home_suggestionsSection__uOy_p",categoriesSection:"Home_categoriesSection__S3rlV",recentItems:"Home_recentItems__StH2L",categories:"Home_categories__9_GZT",recentItem:"Home_recentItem__ASCxz",categoriesItem:"Home_categoriesItem__QbwzB",suggestions:"Home_suggestions__cJYvt",navbar:"Home_navbar__38uLS",navItem:"Home_navItem__cyCs8",active:"Home_active__LENoJ",notificationDot:"Home_notificationDot__VKgep",container:"Home_container__UZ9hw",titleCategorie:"Home_titleCategorie__WwN_t",productList:"Home_productList__w_Ptg",productCard:"Home_productCard__gThr2",imageContainer:"Home_imageContainer__lnQvG",productImage:"Home_productImage__zIRMs",productInfo:"Home_productInfo__zB_Kh",productName:"Home_productName___bCPR",productPrice:"Home_productPrice__xchUv",unit:"Home_unit__4fOgm",actions:"Home_actions__fByyA",favoriteButton:"Home_favoriteButton__kXJvs",itemTitleCategorie:"Home_itemTitleCategorie__al7QW",itemLeftIcon:"Home_itemLeftIcon__VMety",itemTitleRightIcon:"Home_itemTitleRightIcon__n_nRH",categoriesClicked:"Home_categoriesClicked__kItzp",isClicked:"Home_isClicked___5JlG",isClickedCardCat:"Home_isClickedCardCat__EKxWf",mainHome:"Home_mainHome__hxfwD",categoriesItemBox:"Home_categoriesItemBox__WNe2H"}},4469:function(e){e.exports={spinner:"Loader_spinner__nWoiP","spinner-b4c8mmhg":"Loader_spinner-b4c8mmhg__MNf8w","spinner-49opz7hg":"Loader_spinner-49opz7hg__nGsoT",contentLoader:"Loader_contentLoader__qMLup"}},6800:function(e,t){var r;!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=n(e,function(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)a.call(e,r)&&e[r]&&(t=n(t,r));return t}(r)))}return e}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0!==(r=(function(){return i}).apply(t,[]))&&(e.exports=r)}()}},function(e){e.O(0,[939,197,234,971,23,744],function(){return e(e.s=2337)}),_N_E=e.O()}]);